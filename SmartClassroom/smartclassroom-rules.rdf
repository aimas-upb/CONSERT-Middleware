<?xml version="1.0"?>
<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:annotation="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#"
    xmlns:space="http://pervasive.semanticweb.org/ont/2004/06/space#"
    xmlns:constraint="http://pervasive.semanticweb.org/ont/2014/05/consert/constraint#"
    xmlns:afn="http://jena.hpl.hp.com/ARQ/function#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:smartclassroom="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#"
    xmlns:spin="http://spinrdf.org/spin#"
    xmlns:device="http://pervasive.semanticweb.org/ont/2004/06/device#"
    xmlns="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/rules#"
    xmlns:functions="http://pervasive.semanticweb.org/ont/2014/05/consert/functions#"
    xmlns:rules="http://pervasive.semanticweb.org/ont/2014/05/consert/rules#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:location="http://pervasive.semanticweb.org/ont/2004/06/location#"
    xmlns:sp="http://spinrdf.org/sp#"
    xmlns:core="http://pervasive.semanticweb.org/ont/2017/07/consert/core#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xml:base="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/rules">
  <owl:Ontology rdf:about="">
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation"/>
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/functions"/>
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/rules"/>
    <owl:imports rdf:resource="http://spinrdf.org/spin"/>
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core"/>
    <owl:versionInfo rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Created with TopBraid Composer</owl:versionInfo>
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core"/>
  </owl:Ontology>
  <rdf:Description rdf:about="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#RoomSection">
    <spin:deriveassertion>
      <AdHocDiscussionRule/>
    </spin:deriveassertion>
  </rdf:Description>
  <rdf:Description rdf:about="http://pervasive.semanticweb.org/ont/2004/06/device#BluetoothEnabledCellphone">
    <spin:deriveassertion>
      <DeviceDerivedLocationRule/>
    </spin:deriveassertion>
  </rdf:Description>
  <spin:ConstructTemplate rdf:ID="PersonLocationInclusionRule">
    <spin:labelTemplate rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >PersonLocationInclusionRule</spin:labelTemplate>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >DerivationRule that takes advantage of the spatial inclusion EntityDescriptions to infer additional locatedIn values for a person.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/rules#DerivationRuleBase"/>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >PersonLocationInclusionRule</rdfs:label>
    <spin:body>
      <sp:Construct>
        <sp:where rdf:parseType="Collection">
          <sp:NamedGraph>
            <sp:graphNameNode rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >contextAssertionUUID</sp:varName>
            </sp:graphNameNode>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >person</sp:varName>
                </sp:subject>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >loc</sp:varName>
                </sp:object>
              </rdf:Description>
            </sp:elements>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/entityStore"/>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >person</sp:varName>
                </sp:subject>
                <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                <sp:object>
                  <rdf:Description rdf:about="http://pervasive.semanticweb.org/ont/2004/06/person#Person">
                    <spin:deriveassertion>
                      <PersonDerivedLocationRule/>
                    </spin:deriveassertion>
                    <spin:deriveassertion>
                      <PersonLocationInclusionRule/>
                    </spin:deriveassertion>
                  </rdf:Description>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >loc</sp:varName>
                </sp:subject>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/space#spatiallySubsumedBy"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >parentLoc</sp:varName>
                </sp:object>
              </rdf:Description>
            </sp:elements>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person/locatedInStore"/>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certainty</sp:varName>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >timeAnn</sp:varName>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >timeAnn</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >time</sp:varName>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validAnn</sp:varName>
                </sp:object>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validAnn</sp:varName>
                </sp:subject>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validity</sp:varName>
                </sp:object>
              </rdf:Description>
            </sp:elements>
          </sp:NamedGraph>
          <sp:Filter>
            <sp:expression>
              <sp:ge>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certainty</sp:varName>
                </sp:arg1>
                <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal"
                >0.8</sp:arg2>
              </sp:ge>
            </sp:expression>
          </sp:Filter>
          <sp:Bind>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >src</sp:varName>
            </sp:variable>
            <sp:expression>
              <functions:getCurrentAgent/>
            </sp:expression>
          </sp:Bind>
        </sp:where>
        <sp:templates rdf:parseType="Collection">
          <rdf:Description>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionResource"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:nodeID="A1"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:nodeID="A2"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:nodeID="A3"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:nodeID="A4"/>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:nodeID="A0"/>
            <sp:object rdf:nodeID="A5"/>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionContent"/>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:nodeID="A5"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:object rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement"/>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:nodeID="A5"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#subject"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >person</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:nodeID="A5"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate"/>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:nodeID="A5"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#object"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >parentLoc</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:subject rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >person</sp:varName>
            </sp:subject>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >parentLoc</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericTimestampAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A1"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:subject rdf:nodeID="A1"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >time</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#TemporalValidityAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A2"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:subject rdf:nodeID="A2"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >validity</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericCertaintyAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A3"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:subject rdf:nodeID="A3"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >certainty</sp:varName>
            </sp:object>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#SourceAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A4"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
            <sp:subject rdf:nodeID="A4"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >src</sp:varName>
            </sp:object>
          </rdf:Description>
        </sp:templates>
        <spin:thisUnbound rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >true</spin:thisUnbound>
      </sp:Construct>
    </spin:body>
  </spin:ConstructTemplate>
  <spin:ConstructTemplate rdf:ID="DeviceDerivedLocationRule">
    <spin:body>
      <sp:Construct>
        <spin:thisUnbound rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >true</spin:thisUnbound>
        <sp:templates rdf:parseType="Collection">
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasDerivedLocation"/>
            <sp:subject rdf:nodeID="A6"/>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionResource"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
            <sp:object rdf:nodeID="A7"/>
            <sp:subject rdf:nodeID="A6"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
            <sp:object rdf:nodeID="A8"/>
            <sp:subject rdf:nodeID="A6"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
            <sp:object rdf:nodeID="A9"/>
            <sp:subject rdf:nodeID="A6"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
            <sp:object rdf:nodeID="A10"/>
            <sp:subject rdf:nodeID="A6"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:nodeID="A11"/>
            <sp:subject rdf:nodeID="A6"/>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionContent"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A11"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >bd</sp:varName>
            </sp:object>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#subject"/>
            <sp:subject rdf:nodeID="A11"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasDerivedLocation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate"/>
            <sp:subject rdf:nodeID="A11"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >loc</sp:varName>
            </sp:object>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#object"/>
            <sp:subject rdf:nodeID="A11"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >loc</sp:varName>
            </sp:object>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasDerivedLocation"/>
            <sp:subject rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >bd</sp:varName>
            </sp:subject>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericTimestampAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A7"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >time</sp:varName>
            </sp:object>
            <sp:subject rdf:nodeID="A7"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#TemporalValidityAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A8"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >validity</sp:varName>
            </sp:object>
            <sp:subject rdf:nodeID="A8"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericCertaintyAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A9"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >certainty</sp:varName>
            </sp:object>
            <sp:subject rdf:nodeID="A9"/>
          </rdf:Description>
          <rdf:Description>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#SourceAnnotation"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:subject rdf:nodeID="A10"/>
          </rdf:Description>
          <rdf:Description>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >src</sp:varName>
            </sp:object>
            <sp:subject rdf:nodeID="A10"/>
          </rdf:Description>
        </sp:templates>
        <sp:where rdf:parseType="Collection">
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >loc</sp:varName>
                </sp:object>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasProfiledLocation"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >ps</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >profiledLoc</sp:varName>
            </sp:graphNameNode>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >bAddress</sp:varName>
                </sp:object>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#sensesBluetoothAddress"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >ps</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >contextAssertionUUID</sp:varName>
            </sp:graphNameNode>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certainty</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >timeAnn</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >time</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >timeAnn</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validAnn</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >contextAssertionUUID</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validity</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validAnn</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core/sensesBluetoothAddressStore"/>
          </sp:NamedGraph>
          <sp:Filter>
            <sp:expression>
              <sp:ge>
                <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal"
                >0.8</sp:arg2>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certainty</sp:varName>
                </sp:arg1>
              </sp:ge>
            </sp:expression>
          </sp:Filter>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#PresenceSensor"/>
                <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >ps</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#BluetoothEnabledCellphone"/>
                <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >bd</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >bAddress</sp:varName>
                </sp:object>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#bluetoothMAC"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >bd</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/entityStore"/>
          </sp:NamedGraph>
          <sp:Bind>
            <sp:expression>
              <functions:getCurrentAgent/>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >src</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Construct>
    </spin:body>
    <rdfs:subClassOf rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/rules#DerivationRuleBase"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >The rule for inferring the derived location of bluetooth enabled devices.</rdfs:comment>
    <spin:labelTemplate rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >The rule for inferring the derived location of bluetooth enabled devices.</spin:labelTemplate>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >DeviceDerivedLocationRule</rdfs:label>
  </spin:ConstructTemplate>
  <sp:ge rdf:nodeID="A12">
    <sp:arg1 rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >certainty</sp:varName>
    </sp:arg1>
    <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal"
    >0.8</sp:arg2>
  </sp:ge>
  <rdf:Description rdf:nodeID="A13">
    <sp:subject rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >phone</sp:varName>
    </sp:subject>
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasDerivedLocation"/>
    <sp:object rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >loc</sp:varName>
    </sp:object>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A14">
    <rdf:rest rdf:parseType="Collection">
      <rdf:Description>
        <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#SourceAnnotation"/>
        <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
        <sp:subject rdf:nodeID="A15"/>
      </rdf:Description>
      <rdf:Description>
        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
        <sp:object rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >src</sp:varName>
        </sp:object>
        <sp:subject rdf:nodeID="A15"/>
      </rdf:Description>
    </rdf:rest>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >acc</sp:varName>
      </sp:object>
      <sp:subject rdf:nodeID="A16"/>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A17">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >timeAnn</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A18">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >earlier</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A19">
    <rdf:rest rdf:parseType="Collection">
      <rdf:Description>
        <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#SkeletonSitting"/>
        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#hasSkelPositionRole"/>
        <sp:subject rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >?0</sp:varName>
        </sp:subject>
      </rdf:Description>
    </rdf:rest>
    <rdf:first rdf:parseType="Resource">
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >S</sp:varName>
      </sp:object>
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#hasSkeletonRole"/>
      <sp:subject rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >?0</sp:varName>
      </sp:subject>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A20">
    <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
      <sp:subject rdf:nodeID="A21"/>
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >src</sp:varName>
      </sp:object>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A22">
    <rdf:rest rdf:parseType="Resource">
      <rdf:first rdf:parseType="Resource">
        <sp:object rdf:nodeID="A23"/>
        <sp:subject rdf:nodeID="A24"/>
        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionContent"/>
      </rdf:first>
      <rdf:rest rdf:parseType="Resource">
        <rdf:first rdf:parseType="Resource">
          <sp:object rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement"/>
          <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
          <sp:subject rdf:nodeID="A23"/>
        </rdf:first>
        <rdf:rest rdf:parseType="Resource">
          <rdf:first rdf:parseType="Resource">
            <sp:object rdf:nodeID="A25"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#subject"/>
            <sp:subject rdf:nodeID="A23"/>
          </rdf:first>
          <rdf:rest rdf:parseType="Resource">
            <rdf:first rdf:parseType="Resource">
              <sp:object rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate"/>
              <sp:subject rdf:nodeID="A23"/>
            </rdf:first>
            <rdf:rest rdf:parseType="Resource">
              <rdf:first rdf:parseType="Resource">
                <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#HostsAdHocDiscussion"/>
                <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#object"/>
                <sp:subject rdf:nodeID="A23"/>
              </rdf:first>
              <rdf:rest rdf:parseType="Resource">
                <rdf:first rdf:parseType="Resource">
                  <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#HostsAdHocDiscussion"/>
                  <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                  <sp:subject rdf:nodeID="A25"/>
                </rdf:first>
                <rdf:rest rdf:parseType="Resource">
                  <rdf:first rdf:parseType="Resource">
                    <sp:object rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >RL</sp:varName>
                    </sp:object>
                    <sp:subject rdf:nodeID="A25"/>
                    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionRole"/>
                  </rdf:first>
                  <rdf:rest rdf:parseType="Resource">
                    <rdf:first rdf:parseType="Resource">
                      <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericTimestampAnnotation"/>
                      <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                      <sp:subject rdf:nodeID="A26"/>
                    </rdf:first>
                    <rdf:rest rdf:parseType="Resource">
                      <rdf:first rdf:parseType="Resource">
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >t</sp:varName>
                        </sp:object>
                        <sp:subject rdf:nodeID="A26"/>
                      </rdf:first>
                      <rdf:rest rdf:parseType="Resource">
                        <rdf:first rdf:parseType="Resource">
                          <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#TemporalValidityAnnotation"/>
                          <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                          <sp:subject rdf:nodeID="A27"/>
                        </rdf:first>
                        <rdf:rest rdf:parseType="Resource">
                          <rdf:first rdf:parseType="Resource">
                            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >valid</sp:varName>
                            </sp:object>
                            <sp:subject rdf:nodeID="A27"/>
                          </rdf:first>
                          <rdf:rest rdf:parseType="Resource">
                            <rdf:first rdf:parseType="Resource">
                              <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericCertaintyAnnotation"/>
                              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                              <sp:subject rdf:nodeID="A16"/>
                            </rdf:first>
                            <rdf:rest rdf:nodeID="A14"/>
                          </rdf:rest>
                        </rdf:rest>
                      </rdf:rest>
                    </rdf:rest>
                  </rdf:rest>
                </rdf:rest>
              </rdf:rest>
            </rdf:rest>
          </rdf:rest>
        </rdf:rest>
      </rdf:rest>
    </rdf:rest>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
      <sp:object rdf:nodeID="A15"/>
      <sp:subject rdf:nodeID="A24"/>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A28">
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
    <sp:object rdf:nodeID="A16"/>
    <sp:subject rdf:nodeID="A24"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A29">
    <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericTimestampAnnotation"/>
    <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
    <sp:subject rdf:nodeID="A30"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A31">
    <rdf:rest rdf:parseType="Collection">
      <sp:Bind>
        <sp:variable rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >src</sp:varName>
        </sp:variable>
        <sp:expression>
          <functions:getCurrentAgent/>
        </sp:expression>
      </sp:Bind>
    </rdf:rest>
    <rdf:first>
      <sp:Filter>
        <sp:expression rdf:nodeID="A12"/>
      </sp:Filter>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A32">
    <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
    <rdf:first rdf:nodeID="A13"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A33">
    <rdf:rest rdf:parseType="Collection">
      <sp:Bind>
        <sp:expression>
          <functions:makeValidityInterval>
            <sp:arg2 rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >close</sp:varName>
            </sp:arg2>
            <sp:arg1 rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >earlier</sp:varName>
            </sp:arg1>
          </functions:makeValidityInterval>
        </sp:expression>
        <sp:variable rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >interv</sp:varName>
        </sp:variable>
      </sp:Bind>
      <sp:Filter>
        <sp:expression>
          <functions:validityIntervalsInclude>
            <sp:arg2 rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >interv</sp:varName>
            </sp:arg2>
            <sp:arg1 rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >validS</sp:varName>
            </sp:arg1>
          </functions:validityIntervalsInclude>
        </sp:expression>
      </sp:Filter>
    </rdf:rest>
    <rdf:first>
      <sp:Bind>
        <sp:expression>
          <functions:datetimeDelay>
            <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
            >-20</sp:arg2>
            <sp:arg1 rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >now</sp:varName>
            </sp:arg1>
          </functions:datetimeDelay>
        </sp:expression>
        <sp:variable rdf:nodeID="A18"/>
      </sp:Bind>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A34">
    <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#SourceAnnotation"/>
    <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
    <sp:subject rdf:nodeID="A21"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A35">
    <rdf:rest rdf:parseType="Resource">
      <rdf:rest rdf:parseType="Resource">
        <rdf:rest rdf:parseType="Resource">
          <rdf:rest rdf:parseType="Resource">
            <rdf:rest rdf:nodeID="A33"/>
            <rdf:first>
              <sp:Bind>
                <sp:expression>
                  <functions:datetimeDelay>
                    <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                    >-2</sp:arg2>
                    <sp:arg1 rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >now</sp:varName>
                    </sp:arg1>
                  </functions:datetimeDelay>
                </sp:expression>
                <sp:variable rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >close</sp:varName>
                </sp:variable>
              </sp:Bind>
            </rdf:first>
          </rdf:rest>
          <rdf:first>
            <sp:Bind>
              <sp:expression>
                <functions:now/>
              </sp:expression>
              <sp:variable rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >now</sp:varName>
              </sp:variable>
            </sp:Bind>
          </rdf:first>
        </rdf:rest>
        <rdf:first>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >valAnn</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >gCamera</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >validS</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >valAnn</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >gCamera</sp:varName>
                </sp:subject>
              </rdf:Description>
              <rdf:Description>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >accS</sp:varName>
                </sp:object>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >certAnn</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core/sensesSkeletonInPositionStore"/>
          </sp:NamedGraph>
        </rdf:first>
      </rdf:rest>
      <rdf:first>
        <sp:NamedGraph>
          <sp:elements rdf:parseType="Resource">
            <rdf:rest rdf:parseType="Resource">
              <rdf:rest rdf:nodeID="A19"/>
              <rdf:first rdf:parseType="Resource">
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >K</sp:varName>
                </sp:object>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#hasCameraRole"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >?0</sp:varName>
                </sp:subject>
              </rdf:first>
            </rdf:rest>
            <rdf:first rdf:parseType="Resource">
              <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#sensesSkeletonInPosition"/>
              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
              <sp:subject rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >?0</sp:varName>
              </sp:subject>
            </rdf:first>
          </sp:elements>
          <sp:graphNameNode rdf:parseType="Resource">
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >gCamera</sp:varName>
          </sp:graphNameNode>
        </sp:NamedGraph>
      </rdf:first>
    </rdf:rest>
    <rdf:first>
      <sp:NamedGraph>
        <sp:elements rdf:parseType="Collection">
          <rdf:Description>
            <sp:object rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >RL</sp:varName>
            </sp:object>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasProfiledLocation"/>
            <sp:subject rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >K</sp:varName>
            </sp:subject>
          </rdf:Description>
        </sp:elements>
        <sp:graphNameNode rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >profiledLoc</sp:varName>
        </sp:graphNameNode>
      </sp:NamedGraph>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A36">
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
    <sp:subject rdf:nodeID="A30"/>
    <sp:object rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >time</sp:varName>
    </sp:object>
  </rdf:Description>
  <sp:Bind rdf:nodeID="A37">
    <sp:expression>
      <functions:now/>
    </sp:expression>
    <sp:variable rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >now</sp:varName>
    </sp:variable>
  </sp:Bind>
  <rdf:Description rdf:nodeID="A38">
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
      <sp:subject rdf:nodeID="A39"/>
      <sp:object rdf:nodeID="A40"/>
    </rdf:first>
    <rdf:rest rdf:parseType="Resource">
      <rdf:rest rdf:parseType="Resource">
        <rdf:rest rdf:parseType="Resource">
          <rdf:rest rdf:parseType="Resource">
            <rdf:rest rdf:parseType="Resource">
              <rdf:rest rdf:parseType="Resource">
                <rdf:rest rdf:parseType="Resource">
                  <rdf:rest rdf:parseType="Resource">
                    <rdf:rest rdf:parseType="Resource">
                      <rdf:rest rdf:parseType="Resource">
                        <rdf:rest rdf:parseType="Resource">
                          <rdf:rest rdf:parseType="Resource">
                            <rdf:rest rdf:parseType="Resource">
                              <rdf:rest rdf:parseType="Resource">
                                <rdf:rest rdf:nodeID="A20"/>
                                <rdf:first rdf:nodeID="A34"/>
                              </rdf:rest>
                              <rdf:first rdf:parseType="Resource">
                                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                                <sp:subject rdf:nodeID="A40"/>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >certainty</sp:varName>
                                </sp:object>
                              </rdf:first>
                            </rdf:rest>
                            <rdf:first rdf:parseType="Resource">
                              <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#NumericCertaintyAnnotation"/>
                              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                              <sp:subject rdf:nodeID="A40"/>
                            </rdf:first>
                          </rdf:rest>
                          <rdf:first rdf:parseType="Resource">
                            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                            <sp:subject rdf:nodeID="A41"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >validity</sp:varName>
                            </sp:object>
                          </rdf:first>
                        </rdf:rest>
                        <rdf:first rdf:parseType="Resource">
                          <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#TemporalValidityAnnotation"/>
                          <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                          <sp:subject rdf:nodeID="A41"/>
                        </rdf:first>
                      </rdf:rest>
                      <rdf:first rdf:nodeID="A36"/>
                    </rdf:rest>
                    <rdf:first rdf:nodeID="A29"/>
                  </rdf:rest>
                  <rdf:first rdf:parseType="Resource">
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >person</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >loc</sp:varName>
                    </sp:object>
                  </rdf:first>
                </rdf:rest>
                <rdf:first rdf:parseType="Resource">
                  <sp:subject rdf:nodeID="A42"/>
                  <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#object"/>
                  <sp:object rdf:parseType="Resource">
                    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                    >loc</sp:varName>
                  </sp:object>
                </rdf:first>
              </rdf:rest>
              <rdf:first rdf:parseType="Resource">
                <sp:subject rdf:nodeID="A42"/>
                <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate"/>
                <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
              </rdf:first>
            </rdf:rest>
            <rdf:first rdf:parseType="Resource">
              <sp:subject rdf:nodeID="A42"/>
              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#subject"/>
              <sp:object rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >person</sp:varName>
              </sp:object>
            </rdf:first>
          </rdf:rest>
          <rdf:first rdf:parseType="Resource">
            <sp:subject rdf:nodeID="A42"/>
            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
            <sp:object rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Statement"/>
          </rdf:first>
        </rdf:rest>
        <rdf:first rdf:parseType="Resource">
          <sp:subject rdf:nodeID="A39"/>
          <sp:object rdf:nodeID="A42"/>
          <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionContent"/>
        </rdf:first>
      </rdf:rest>
      <rdf:first rdf:parseType="Resource">
        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
        <sp:subject rdf:nodeID="A39"/>
        <sp:object rdf:nodeID="A21"/>
      </rdf:first>
    </rdf:rest>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A43">
    <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >validMic</sp:varName>
      </sp:object>
      <sp:subject rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >validAnnMic</sp:varName>
      </sp:subject>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A44">
    <rdf:rest rdf:parseType="Resource">
      <rdf:rest rdf:nodeID="A22"/>
      <rdf:first rdf:nodeID="A28"/>
    </rdf:rest>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
      <sp:object rdf:nodeID="A27"/>
      <sp:subject rdf:nodeID="A24"/>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A45">
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
    <sp:subject rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >contextAssertionUUID</sp:varName>
    </sp:subject>
    <sp:object rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >certAnn</sp:varName>
    </sp:object>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A46">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >gProfiledUsage</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A47">
    <rdf:rest rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"/>
    <rdf:first rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >RL</sp:varName>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A48">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >src</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A49">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >gNoise</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A50">
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >validAnnMic</sp:varName>
      </sp:object>
      <sp:subject rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >gNoise</sp:varName>
      </sp:subject>
    </rdf:first>
    <rdf:rest rdf:nodeID="A43"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A51">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >lvl</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A52">
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
    <sp:object rdf:nodeID="A26"/>
    <sp:subject rdf:nodeID="A24"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A53">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >certAnn</sp:varName>
  </rdf:Description>
  <sp:Bind rdf:nodeID="A54">
    <sp:expression>
      <functions:getCurrentAgent/>
    </sp:expression>
    <sp:variable rdf:nodeID="A48"/>
  </sp:Bind>
  <rdf:Description rdf:nodeID="A55">
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasCertainty"/>
    <sp:object rdf:parseType="Resource">
      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
      >certAnnMic</sp:varName>
    </sp:object>
    <sp:subject rdf:nodeID="A49"/>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A56">
    <rdf:rest rdf:parseType="Resource">
      <rdf:rest rdf:nodeID="A31"/>
      <rdf:first>
        <sp:NamedGraph>
          <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device/hasDerivedLocationStore"/>
          <sp:elements rdf:parseType="Collection">
            <rdf:Description rdf:nodeID="A45"/>
            <rdf:Description>
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
              <sp:subject rdf:nodeID="A53"/>
              <sp:object rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >certainty</sp:varName>
              </sp:object>
            </rdf:Description>
            <rdf:Description>
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
              <sp:subject rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >contextAssertionUUID</sp:varName>
              </sp:subject>
              <sp:object rdf:nodeID="A17"/>
            </rdf:Description>
            <rdf:Description>
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
              <sp:subject rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >timeAnn</sp:varName>
              </sp:subject>
              <sp:object rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >time</sp:varName>
              </sp:object>
            </rdf:Description>
            <rdf:Description>
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
              <sp:subject rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >contextAssertionUUID</sp:varName>
              </sp:subject>
              <sp:object rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >validAnn</sp:varName>
              </sp:object>
            </rdf:Description>
            <rdf:Description>
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
              <sp:subject rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >validAnn</sp:varName>
              </sp:subject>
              <sp:object rdf:parseType="Resource">
                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                >validity</sp:varName>
              </sp:object>
            </rdf:Description>
          </sp:elements>
        </sp:NamedGraph>
      </rdf:first>
    </rdf:rest>
    <rdf:first>
      <sp:NamedGraph>
        <sp:graphNameNode rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >contextAssertionUUID</sp:varName>
        </sp:graphNameNode>
        <sp:elements rdf:nodeID="A32"/>
      </sp:NamedGraph>
    </rdf:first>
  </rdf:Description>
  <spin:ConstructTemplate rdf:ID="PersonDerivedLocationRule">
    <rdfs:subClassOf rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/rules#DerivationRuleBase"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >DerivationRule that infers the location of a Person based on the location of his Smartphone.</rdfs:comment>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >PersonDerivedLocationRule</rdfs:label>
    <spin:body>
      <sp:Construct>
        <sp:where rdf:parseType="Resource">
          <rdf:rest rdf:nodeID="A56"/>
          <rdf:first>
            <sp:NamedGraph>
              <sp:graphNameNode rdf:nodeID="A46"/>
              <sp:elements rdf:parseType="Collection">
                <rdf:Description>
                  <sp:subject rdf:parseType="Resource">
                    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                    >phone</sp:varName>
                  </sp:subject>
                  <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasUser"/>
                  <sp:object rdf:parseType="Resource">
                    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                    >person</sp:varName>
                  </sp:object>
                </rdf:Description>
              </sp:elements>
            </sp:NamedGraph>
          </rdf:first>
        </sp:where>
        <sp:templates rdf:parseType="Resource">
          <rdf:first rdf:parseType="Resource">
            <sp:subject rdf:nodeID="A39"/>
            <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/person#locatedIn"/>
            <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionResource"/>
          </rdf:first>
          <rdf:rest rdf:parseType="Resource">
            <rdf:first rdf:parseType="Resource">
              <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
              <sp:subject rdf:nodeID="A39"/>
              <sp:object rdf:nodeID="A30"/>
            </rdf:first>
            <rdf:rest rdf:parseType="Resource">
              <rdf:first rdf:parseType="Resource">
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                <sp:subject rdf:nodeID="A39"/>
                <sp:object rdf:nodeID="A41"/>
              </rdf:first>
              <rdf:rest rdf:nodeID="A38"/>
            </rdf:rest>
          </rdf:rest>
        </sp:templates>
        <spin:thisUnbound rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >true</spin:thisUnbound>
      </sp:Construct>
    </spin:body>
  </spin:ConstructTemplate>
  <rdf:Description rdf:nodeID="A57">
    <rdf:rest rdf:nodeID="A50"/>
    <rdf:first rdf:parseType="Resource">
      <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
      <sp:object rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >accMic</sp:varName>
      </sp:object>
      <sp:subject rdf:parseType="Resource">
        <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >certAnnMic</sp:varName>
      </sp:subject>
    </rdf:first>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A58">
    <sp:expression>
      <sp:Avg>
        <sp:expression rdf:parseType="Resource">
          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
          >accS</sp:varName>
        </sp:expression>
      </sp:Avg>
    </sp:expression>
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >AvgAccS</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A59">
    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >t</sp:varName>
  </rdf:Description>
  <rdf:Description rdf:nodeID="A60">
    <sp:object rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#HostsAdHocDiscussion"/>
    <sp:subject rdf:nodeID="A24"/>
    <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/core#assertionResource"/>
  </rdf:Description>
  <spin:ConstructTemplate rdf:ID="AdHocDiscussionRule">
    <spin:body>
      <sp:Construct>
        <spin:thisUnbound rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >true</spin:thisUnbound>
        <sp:templates rdf:parseType="Resource">
          <rdf:rest rdf:parseType="Resource">
            <rdf:rest rdf:nodeID="A44"/>
            <rdf:first rdf:nodeID="A52"/>
          </rdf:rest>
          <rdf:first rdf:nodeID="A60"/>
        </sp:templates>
        <sp:where rdf:parseType="Collection">
          <sp:SubQuery>
            <sp:query>
              <sp:Select>
                <sp:groupBy rdf:nodeID="A47"/>
                <sp:resultVariables rdf:parseType="Collection">
                  <rdf:Description>
                    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                    >RL</sp:varName>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:expression>
                      <sp:Count>
                        <sp:expression rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >S</sp:varName>
                        </sp:expression>
                        <sp:distinct rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                        >true</sp:distinct>
                      </sp:Count>
                    </sp:expression>
                    <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                    >Ct</sp:varName>
                  </rdf:Description>
                  <rdf:Description rdf:nodeID="A58"/>
                </sp:resultVariables>
                <sp:where rdf:nodeID="A35"/>
              </sp:Select>
            </sp:query>
          </sp:SubQuery>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:object rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >RL</sp:varName>
                </sp:object>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2004/06/device#hasProfiledLocation"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >Mic</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >profiledLoc</sp:varName>
            </sp:graphNameNode>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <sp:object rdf:nodeID="A51"/>
                <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core#hasNoiseLevel"/>
                <sp:subject rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >Mic</sp:varName>
                </sp:subject>
              </rdf:Description>
            </sp:elements>
            <sp:graphNameNode rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >gNoise</sp:varName>
            </sp:graphNameNode>
          </sp:NamedGraph>
          <sp:NamedGraph>
            <sp:elements rdf:parseType="Resource">
              <rdf:rest rdf:nodeID="A57"/>
              <rdf:first rdf:nodeID="A55"/>
            </sp:elements>
            <sp:graphNameNode rdf:resource="http://pervasive.semanticweb.org/ont/2014/07/smartclassroom/core/hasNoiseLevelStore"/>
          </sp:NamedGraph>
          <sp:Bind rdf:nodeID="A37"/>
          <sp:Bind>
            <sp:expression>
              <functions:datetimeDelay>
                <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                >-2</sp:arg2>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >now</sp:varName>
                </sp:arg1>
              </functions:datetimeDelay>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >close</sp:varName>
            </sp:variable>
          </sp:Bind>
          <sp:Bind>
            <sp:expression>
              <functions:datetimeDelay>
                <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                >-20</sp:arg2>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >now</sp:varName>
                </sp:arg1>
              </functions:datetimeDelay>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >earlier</sp:varName>
            </sp:variable>
          </sp:Bind>
          <sp:Bind>
            <sp:expression>
              <functions:makeValidityInterval>
                <sp:arg2 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >close</sp:varName>
                </sp:arg2>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >earlier</sp:varName>
                </sp:arg1>
              </functions:makeValidityInterval>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >interv</sp:varName>
            </sp:variable>
          </sp:Bind>
          <sp:Filter>
            <sp:expression>
              <sp:and>
                <sp:arg2>
                  <functions:validityIntervalsInclude>
                    <sp:arg2 rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >interv</sp:varName>
                    </sp:arg2>
                    <sp:arg1 rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >validMic</sp:varName>
                    </sp:arg1>
                  </functions:validityIntervalsInclude>
                </sp:arg2>
                <sp:arg1>
                  <sp:and>
                    <sp:arg2>
                      <sp:ge>
                        <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                        >60</sp:arg2>
                        <sp:arg1 rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >lvl</sp:varName>
                        </sp:arg1>
                      </sp:ge>
                    </sp:arg2>
                    <sp:arg1>
                      <sp:and>
                        <sp:arg2>
                          <sp:ge>
                            <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal"
                            >0.75</sp:arg2>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >AvgAccS</sp:varName>
                            </sp:arg1>
                          </sp:ge>
                        </sp:arg2>
                        <sp:arg1>
                          <sp:ge>
                            <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                            >2</sp:arg2>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >Ct</sp:varName>
                            </sp:arg1>
                          </sp:ge>
                        </sp:arg1>
                      </sp:and>
                    </sp:arg1>
                  </sp:and>
                </sp:arg1>
              </sp:and>
            </sp:expression>
          </sp:Filter>
          <sp:Bind>
            <sp:expression>
              <functions:certaintyMeetOp>
                <sp:arg2 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >accMic</sp:varName>
                </sp:arg2>
                <sp:arg1 rdf:parseType="Resource">
                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                  >AvgAccS</sp:varName>
                </sp:arg1>
              </functions:certaintyMeetOp>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >acc</sp:varName>
            </sp:variable>
          </sp:Bind>
          <sp:Bind rdf:nodeID="A54"/>
          <sp:Bind>
            <sp:expression>
              <functions:now/>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >t</sp:varName>
            </sp:variable>
          </sp:Bind>
          <sp:Bind>
            <sp:expression>
              <functions:makeValidityInterval>
                <sp:arg2 rdf:nodeID="A59"/>
                <sp:arg1>
                  <functions:datetimeDelay>
                    <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#integer"
                    >-20</sp:arg2>
                    <sp:arg1 rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >t</sp:varName>
                    </sp:arg1>
                  </functions:datetimeDelay>
                </sp:arg1>
              </functions:makeValidityInterval>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >valid</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Construct>
    </spin:body>
    <rdfs:subClassOf rdf:resource="http://pervasive.semanticweb.org/ont/2014/05/consert/rules#DerivationRuleBase"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >The derivation rule for detecting that an ad-hoc discussion is taking place in a room section.</rdfs:comment>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >AdHocDiscussionRule</rdfs:label>
  </spin:ConstructTemplate>
</rdf:RDF>

<!-- Created with TopBraid -->
