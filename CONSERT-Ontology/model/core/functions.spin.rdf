<?xml version="1.0"?>
<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:contextannotation="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#"
    xmlns="http://pervasive.semanticweb.org/ont/2014/05/consert/functions#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:sp="http://spinrdf.org/sp#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:contextassertion="http://pervasive.semanticweb.org/ont/2014/05/consert/core#"
    xmlns:spin="http://spinrdf.org/spin#"
    xmlns:spl="http://spinrdf.org/spl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xml:base="http://pervasive.semanticweb.org/ont/2014/05/consert/functions">
  <owl:Ontology rdf:about="">
    <owl:imports rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation"/>
    <owl:imports rdf:resource="http://spinrdf.org/spl"/>
    <owl:versionInfo rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Created with TopBraid Composer</owl:versionInfo>
  </owl:Ontology>
  <rdf:Property rdf:about="http://spinrdf.org/arg#contextAssertionResource">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#newValidityPeriod">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#newAssertionUUID">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#validityPeriod">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#intervalSet1">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#assertionResource">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#newValiditiyPeriod">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#newAssertionGraphID">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <rdf:Property rdf:about="http://spinrdf.org/arg#contextAssertionStore">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/sp#arg"/>
  </rdf:Property>
  <spin:Function rdf:ID="validityIntervalTotalExceeds">
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Returns true if the total span of all intervals in the validity set of a ContextAssertion exceeds the length in seconds given by arg2.</rdfs:comment>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#integer"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityIntervalTotalExceeds</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="validityMeetOp">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityMeetOp</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="contextassertion:intervalListType"/>
  </spin:Function>
  <spin:Function rdf:ID="validityJoinOp">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityJoinOp</rdfs:label>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Implements the join operator for the time validity annotation domain.</rdfs:comment>
    <spin:returnType rdf:resource="contextassertion:intervalListType"/>
  </spin:Function>
  <spin:Function rdf:ID="timestampJoinOp">
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:body>
      <sp:Select>
        <sp:resultVariables rdf:parseType="Collection">
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >result</sp:varName>
          </rdf:Description>
        </sp:resultVariables>
        <sp:where rdf:parseType="Collection">
          <sp:Bind>
            <sp:expression>
              <sp:if>
                <sp:arg3 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                <sp:arg1>
                  <sp:gt>
                    <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                    <sp:arg1 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                  </sp:gt>
                </sp:arg1>
              </sp:if>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >result</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Select>
    </spin:body>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >timestampJoinOp</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
  </spin:Function>
  <spin:Function rdf:ID="certaintyMeetOp">
    <spin:body>
      <sp:Select>
        <sp:resultVariables rdf:parseType="Collection">
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >result</sp:varName>
          </rdf:Description>
        </sp:resultVariables>
        <sp:where rdf:parseType="Collection">
          <sp:Bind>
            <sp:expression>
              <sp:if>
                <sp:arg3 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                <sp:arg1>
                  <sp:lt>
                    <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                    <sp:arg1 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                  </sp:lt>
                </sp:arg1>
              </sp:if>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >result</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Select>
    </spin:body>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
  </spin:Function>
  <spin:Function rdf:ID="validityIntervalExceeds">
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Returns true if the span of at least one of the time intervals included in the validity interval set of a ContextAssertion exceeds the length in seconds given by arg2.</rdfs:comment>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#integer"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityIntervalExceeds</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:RuleProperty rdf:about="http://spinrdf.org/spin#deriveassertion">
    <rdfs:subPropertyOf rdf:resource="http://spinrdf.org/spin#rule"/>
  </spin:RuleProperty>
  <spin:Function rdf:ID="getCurrentAgent">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >afn:getCurrentAgent</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Gets the URI of the current agent that runs this model.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="certaintyJoinOp">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >certaintyJoinOp</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:body>
      <sp:Select>
        <sp:resultVariables rdf:parseType="Collection">
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >result</sp:varName>
          </rdf:Description>
        </sp:resultVariables>
        <sp:where rdf:parseType="Collection">
          <sp:Bind>
            <sp:expression>
              <sp:if>
                <sp:arg3 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                <sp:arg1>
                  <sp:gt>
                    <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                    <sp:arg1 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                  </sp:gt>
                </sp:arg1>
              </sp:if>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >result</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Select>
    </spin:body>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#float"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
  </spin:Function>
  <spin:Function rdf:ID="validityIntervalsInclude">
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Checks whether there exists an interval in the first interval set which includes an interval from the second interval set.</rdfs:comment>
  </spin:Function>
  <spin:Function rdf:ID="makeValidityInterval">
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Create an time interval given the start and end time points.</rdfs:comment>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >afn:makeValidityInterval</rdfs:label>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="contextassertion:intervalListType"/>
  </spin:Function>
  <spin:Function rdf:ID="certaintyPermitsContinuity">
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Threshold function which indicates if the double values of a NumericValueCertainty permit the execution of an annotation join operation, as part of the continuity check.</rdfs:comment>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#double"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >certaintyPermitsContinuity</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="mostRecentAssertionInstance">
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:returnType rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >mostRecentAssertionInstance</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Retrieve the UUID (as a URI Node) of the newest instance available in the runtime ContextStore for a given ContextAssertion type.</rdfs:comment>
  </spin:Function>
  <spin:Function rdf:ID="timestampMeetOp">
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:body>
      <sp:Select>
        <sp:resultVariables rdf:parseType="Collection">
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >result</sp:varName>
          </rdf:Description>
        </sp:resultVariables>
        <sp:where rdf:parseType="Collection">
          <sp:Bind>
            <sp:expression>
              <sp:if>
                <sp:arg3 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                <sp:arg1>
                  <sp:lt>
                    <sp:arg2 rdf:resource="http://spinrdf.org/spin#_arg2"/>
                    <sp:arg1 rdf:resource="http://spinrdf.org/spin#_arg1"/>
                  </sp:lt>
                </sp:arg1>
              </sp:if>
            </sp:expression>
            <sp:variable rdf:parseType="Resource">
              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
              >result</sp:varName>
            </sp:variable>
          </sp:Bind>
        </sp:where>
      </sp:Select>
    </spin:body>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >timestampMeetOp</rdfs:label>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Implements the meet operator for the timestamp annotation domain.</rdfs:comment>
  </spin:Function>
  <spin:Function rdf:ID="plusInfty">
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Function that constructs a +infinity marker for a temporal validity interval.</rdfs:comment>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >plusInfty</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="validityIntervalContains">
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityIntervalContains</rdfs:label>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
  </spin:Function>
  <spin:Function rdf:ID="minusInfty">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >minusInfty</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Function that constructs a -infinity marker for a temporal validity interval.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="now">
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >now</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >CONSERT Engine dependent computation of the current datetime.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="newGraphUUID">
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#anyURI"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
        <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >The local name of the ContextAssertion for which we want to create an identifier named graph.</rdfs:comment>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#anyURI"/>
        <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
        >The base URI corresponding to the ontology defining the domain context models.</rdfs:comment>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >afn:newGraphUUID</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Get an UUID URI for the identifier named graph of a ContextAssertion.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="datetimeDelay">
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#integer"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >afn:datetimeDelay</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Add or subtract a given time delay amount (specified in seconds) from a timepoint.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:Function rdf:ID="timestampPermitsContinuity">
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Threshold function which indicates if the dateTime values of a DatetimeTimestamp permit the execution of an annotation join operation, as part of the continuity check.</rdfs:comment>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >timestampPermitsContinuity</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
  </spin:Function>
  <spin:SelectTemplate rdf:ID="CloseEnoughValidity">
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spin#SelectTemplates"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
        <spl:predicate rdf:resource="http://spinrdf.org/arg#newAssertionUUID"/>
      </spl:Argument>
    </spin:constraint>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >CloseEnoughValidity</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Retrieve the ContextAssertions of a given type which have validity periods that are close enough to the one given as argument.
</rdfs:comment>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/arg#newValidityPeriod"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
        <spl:predicate rdf:resource="http://spinrdf.org/arg#contextAssertionStore"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
        <spl:predicate rdf:resource="http://spinrdf.org/arg#contextAssertionResource"/>
      </spl:Argument>
    </spin:constraint>
    <spin:body>
      <sp:Select>
        <sp:where rdf:parseType="Collection">
          <sp:Union>
            <sp:elements rdf:parseType="Collection">
              <rdf:Description>
                <rdf:first>
                  <sp:NamedGraph>
                    <sp:graphNameNode rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >contextAssertionStore</sp:varName>
                    </sp:graphNameNode>
                    <sp:elements rdf:parseType="Collection">
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validityAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validityAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validity</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestampAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestampAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestamp</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >srcAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >srcAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >src</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newAssertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newSrcAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newSrcAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >src</sp:varName>
                        </sp:object>
                      </rdf:Description>
                    </sp:elements>
                  </sp:NamedGraph>
                </rdf:first>
                <rdf:rest rdf:parseType="Collection">
                  <rdf:Description>
                    <rdf:first>
                      <sp:SubQuery>
                        <sp:query>
                          <sp:Select>
                            <sp:where rdf:parseType="Collection">
                              <sp:NamedGraph>
                                <sp:graphNameNode rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >assertionUUID</sp:varName>
                                </sp:graphNameNode>
                                <sp:elements rdf:parseType="Collection">
                                  <rdf:Description>
                                    <sp:subject rdf:parseType="Resource">
                                      <sp:varName rdf:datatype=
                                      "http://www.w3.org/2001/XMLSchema#string"
                                      >?0</sp:varName>
                                    </sp:subject>
                                    <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                                    <sp:object rdf:parseType="Resource">
                                      <sp:varName rdf:datatype=
                                      "http://www.w3.org/2001/XMLSchema#string"
                                      >contextAssertionResource</sp:varName>
                                    </sp:object>
                                  </rdf:Description>
                                </sp:elements>
                              </sp:NamedGraph>
                            </sp:where>
                            <sp:resultVariables rdf:parseType="Collection">
                              <rdf:Description>
                                <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                >assertionUUID</sp:varName>
                              </rdf:Description>
                            </sp:resultVariables>
                          </sp:Select>
                        </sp:query>
                      </sp:SubQuery>
                    </rdf:first>
                    <rdf:rest rdf:parseType="Collection">
                      <sp:Minus>
                        <sp:elements rdf:parseType="Collection">
                          <sp:SubQuery>
                            <sp:query>
                              <sp:Select>
                                <sp:where rdf:parseType="Collection">
                                  <rdf:Description>
                                    <rdf:first>
                                      <sp:NamedGraph>
                                        <sp:graphNameNode rdf:parseType="Resource">
                                          <sp:varName rdf:datatype=
                                          "http://www.w3.org/2001/XMLSchema#string"
                                          >assertionUUID</sp:varName>
                                        </sp:graphNameNode>
                                        <sp:elements rdf:parseType="Collection">
                                          <rdf:Description>
                                            <sp:subject rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >?1</sp:varName>
                                            </sp:subject>
                                            <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                                            <sp:object rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >contextAssertionResource</sp:varName>
                                            </sp:object>
                                          </rdf:Description>
                                        </sp:elements>
                                      </sp:NamedGraph>
                                    </rdf:first>
                                    <rdf:rest rdf:parseType="Collection">
                                      <sp:NamedGraph>
                                        <sp:graphNameNode rdf:parseType="Resource">
                                          <sp:varName rdf:datatype=
                                          "http://www.w3.org/2001/XMLSchema#string"
                                          >assertionUUID</sp:varName>
                                        </sp:graphNameNode>
                                        <sp:elements rdf:parseType="Collection">
                                          <rdf:Description>
                                            <sp:subject rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >?2</sp:varName>
                                            </sp:subject>
                                            <sp:predicate rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >p</sp:varName>
                                            </sp:predicate>
                                            <sp:object rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >o</sp:varName>
                                            </sp:object>
                                          </rdf:Description>
                                        </sp:elements>
                                      </sp:NamedGraph>
                                    </rdf:rest>
                                  </rdf:Description>
                                  <sp:Minus>
                                    <sp:elements rdf:parseType="Collection">
                                      <sp:NamedGraph>
                                        <sp:graphNameNode rdf:parseType="Resource">
                                          <sp:varName rdf:datatype=
                                          "http://www.w3.org/2001/XMLSchema#string"
                                          >newAssertionUUID</sp:varName>
                                        </sp:graphNameNode>
                                        <sp:elements rdf:parseType="Collection">
                                          <rdf:Description>
                                            <sp:subject rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >?3</sp:varName>
                                            </sp:subject>
                                            <sp:predicate rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >p</sp:varName>
                                            </sp:predicate>
                                            <sp:object rdf:parseType="Resource">
                                              <sp:varName rdf:datatype=
                                              "http://www.w3.org/2001/XMLSchema#string"
                                              >o</sp:varName>
                                            </sp:object>
                                          </rdf:Description>
                                        </sp:elements>
                                      </sp:NamedGraph>
                                    </sp:elements>
                                  </sp:Minus>
                                </sp:where>
                                <sp:resultVariables rdf:parseType="Collection">
                                  <rdf:Description>
                                    <sp:varName rdf:datatype=
                                    "http://www.w3.org/2001/XMLSchema#string"
                                    >assertionUUID</sp:varName>
                                  </rdf:Description>
                                </sp:resultVariables>
                                <sp:groupBy rdf:parseType="Collection">
                                  <rdf:Description>
                                    <sp:varName rdf:datatype=
                                    "http://www.w3.org/2001/XMLSchema#string"
                                    >assertionUUID</sp:varName>
                                  </rdf:Description>
                                </sp:groupBy>
                              </sp:Select>
                            </sp:query>
                          </sp:SubQuery>
                        </sp:elements>
                      </sp:Minus>
                    </rdf:rest>
                  </rdf:Description>
                  <sp:Filter>
                    <sp:expression>
                      <sp:and>
                        <sp:arg1>
                          <sp:ne>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >assertionUUID</sp:varName>
                            </sp:arg1>
                            <sp:arg2 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >newAssertionUUID</sp:varName>
                            </sp:arg2>
                          </sp:ne>
                        </sp:arg1>
                        <sp:arg2>
                          <validityIntervalsCloseEnough>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >validity</sp:varName>
                            </sp:arg1>
                            <sp:arg2 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >newValidityPeriod</sp:varName>
                            </sp:arg2>
                          </validityIntervalsCloseEnough>
                        </sp:arg2>
                      </sp:and>
                    </sp:expression>
                  </sp:Filter>
                </rdf:rest>
              </rdf:Description>
              <rdf:Description>
                <rdf:first>
                  <sp:NamedGraph>
                    <sp:graphNameNode rdf:parseType="Resource">
                      <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                      >contextAssertionStore</sp:varName>
                    </sp:graphNameNode>
                    <sp:elements rdf:parseType="Collection">
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasValidity"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validityAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validityAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >validity</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasTimestamp"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestampAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasStructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestampAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >timestamp</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >assertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >srcAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >srcAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >src</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasSource"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newAssertionUUID</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newSrcAnn</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://pervasive.semanticweb.org/ont/2017/07/consert/annotation#hasUnstructuredValue"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >newSrcAnn</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                          >src</sp:varName>
                        </sp:object>
                      </rdf:Description>
                    </sp:elements>
                  </sp:NamedGraph>
                </rdf:first>
                <rdf:rest rdf:parseType="Collection">
                  <sp:SubQuery>
                    <sp:query>
                      <sp:Select>
                        <sp:where rdf:parseType="Collection">
                          <sp:NamedGraph>
                            <sp:graphNameNode rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >assertionUUID</sp:varName>
                            </sp:graphNameNode>
                            <sp:elements rdf:parseType="Collection">
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >s</sp:varName>
                                </sp:subject>
                                <sp:predicate rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >contextAssertionResource</sp:varName>
                                </sp:predicate>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >o</sp:varName>
                                </sp:object>
                              </rdf:Description>
                            </sp:elements>
                          </sp:NamedGraph>
                          <sp:NamedGraph>
                            <sp:graphNameNode rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >newAssertionUUID</sp:varName>
                            </sp:graphNameNode>
                            <sp:elements rdf:parseType="Collection">
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >s</sp:varName>
                                </sp:subject>
                                <sp:predicate rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >contextAssertionResource</sp:varName>
                                </sp:predicate>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                                  >o</sp:varName>
                                </sp:object>
                              </rdf:Description>
                            </sp:elements>
                          </sp:NamedGraph>
                        </sp:where>
                        <sp:resultVariables rdf:parseType="Collection">
                          <rdf:Description>
                            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                            >assertionUUID</sp:varName>
                          </rdf:Description>
                        </sp:resultVariables>
                      </sp:Select>
                    </sp:query>
                  </sp:SubQuery>
                  <sp:Filter>
                    <sp:expression>
                      <sp:and>
                        <sp:arg1>
                          <sp:ne>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >assertionUUID</sp:varName>
                            </sp:arg1>
                            <sp:arg2 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >newAssertionUUID</sp:varName>
                            </sp:arg2>
                          </sp:ne>
                        </sp:arg1>
                        <sp:arg2>
                          <validityIntervalsCloseEnough>
                            <sp:arg1 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >validity</sp:varName>
                            </sp:arg1>
                            <sp:arg2 rdf:parseType="Resource">
                              <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
                              >newValidityPeriod</sp:varName>
                            </sp:arg2>
                          </validityIntervalsCloseEnough>
                        </sp:arg2>
                      </sp:and>
                    </sp:expression>
                  </sp:Filter>
                </rdf:rest>
              </rdf:Description>
            </sp:elements>
          </sp:Union>
        </sp:where>
        <sp:resultVariables rdf:parseType="Collection">
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >assertionUUID</sp:varName>
          </rdf:Description>
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >validity</sp:varName>
          </rdf:Description>
          <rdf:Description>
            <sp:varName rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
            >timestamp</sp:varName>
          </rdf:Description>
        </sp:resultVariables>
      </sp:Select>
    </spin:body>
  </spin:SelectTemplate>
  <spin:Function rdf:ID="validityPermitsContinuity">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityPermitsContinuity</rdfs:label>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
  </spin:Function>
  <spin:Function rdf:ID="validityIntervalsOverlap">
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >intervalsOverlap</rdfs:label>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Checks whether a set of intervals has any overlap with another set of intervals.</rdfs:comment>
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
  </spin:Function>
  <spin:Function rdf:ID="validityIntervalsCloseEnough">
    <rdfs:subClassOf rdf:resource="http://spinrdf.org/spl#MiscFunctions"/>
    <rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >Verifies if two validity annotations contain 'close enough' intervals</rdfs:comment>
    <rdfs:label rdf:datatype="http://www.w3.org/2001/XMLSchema#string"
    >validityIntervalsCloseEnough</rdfs:label>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg1"/>
      </spl:Argument>
    </spin:constraint>
    <spin:constraint>
      <spl:Argument>
        <spl:valueType rdf:resource="contextassertion:intervalListType"/>
        <spl:predicate rdf:resource="http://spinrdf.org/sp#arg2"/>
      </spl:Argument>
    </spin:constraint>
    <spin:returnType rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
  </spin:Function>
</rdf:RDF>

<!-- Created with TopBraid -->
